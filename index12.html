<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自定义指令</title>
    <script src="./vue.js"></script>
</head>
<body>
    <div id="app">
        <!-- <my-con v-fuos></my-con> -->

        <!-- <input v-fuos="name"  v-if="a"> -->

        <!-- <input type="text" v-myshow="a"> -->

        <input type="text" v-slice[slicenun].number="cont">
        {{ cont }}
    </div>

    <script>
        // Vue.component('my-con',{
        //     template:`
        //     <p>mr Deng is a p</p>
        //     `
        // })


        // Vue.directive('fuos',{
        //     inserted(el) {
        //         el.focus();
        //     },
        //     bind(el,binding ){
        //         console.log(el)
        //         console.log(binding.modifiers)
        //     },
        //     update() {
        //         console.log("数据被更新了")
        //     },
        //     unbind(){
        //         console.log('绑定解除了')
        //     }
        // })


        // Vue.directive('myshow',{
        //     bind(el,binding){
        //         const { value } = binding;
        //         const display = value? '' : 'none';
        //         el.style.display = display
        //     },
        //     componentUpdated(el,binding){
        //         const { value } = binding;
        //         const display = value? '' : 'none';
        //         el.style.display = display
        //     }
        // })



        // Vue.directive('mymodel',{
        //     bind(el,binding,vnode){
        //         const vm = vnode.context;
        //         const { value,expression } = binding;
        //         el.value = value;

        //         el.oninput = ()=>{
        //             const vulueInput = el.value
        //             vm[expression] = vulueInput
        //         }
        //     },
        //     componentUpdated(el,binding){
        //         const { value } = binding;
        //         el.value = value;
        //     }   
        // })



        Vue.directive('slice',{
            bind(el,binding,vnode){
                const vm = vnode.context;
                let { value,expression,modifiers,arg } = binding;
                arg = arg || 5;
                if(modifiers.number){
                    value = value.replace(/[^0-9]g/, '')
                }
                el.value = value.slice(0,arg)
                vm[expression] = el.value
                el.oninput = ()=>{

                }
            },
            componentUpdated(el,binding){
                const { value } = binding;
                el.value = value.slice(0,arg)
                if(modifiers.number){
                    value = value.replace(/[^0-9]g/, '')
                }
                el.value = value.slice(0,arg)
                vm[expression] = el.value
            } 
        })

        const vm = new Vue({
            el:"#app",
            data:{
                name:"渡一",
                a:true,
                cont:'123456789',
                slicenum:5
            },
        })
    </script>
</body>
</html>