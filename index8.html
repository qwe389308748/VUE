<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动态组件</title>
    <script src="./vue.js"></script>
</head>
<body>
    <div id="app">
        <!-- <component is="cm-b"></component> -->
        <button v-for="page in pages" :key="page.id" @click="pageCmp = page.cmp">
            {{ page.name }}
        </button>
        <keep-alive>
            <component :is="pageCmp"></component>
        </keep-alive>
        
    </div>


    <script>
        // Vue.component('cm-a',{
        //     template:`<div>a</div>`
        // })

        // Vue.component('cm-b',{
        //     template:`<div>b</div>`
        // })

        // const vm = new Vue({
        //     el:'#app',
        //     data:{

        //     }
        // })





        Vue.component('base-post',{
            // template:`
            // <div>post</div>
            // `
            data(){
                return {
                    posts: [
                        { title: "标题1", content: { template: `<div>内容1</div>`}, id: 11}, 
                        { title: "标题2", content: { template: `<div>内容2</div>`}, id: 12}, 
                        { title: "标题3", content: { template: `<div>内容3</div>`}, id: 13}, 
                    ],
                    postCmp: '',
                }
            },
            mounted() {
                this.postCmp = this.posts[0].content
            },
            template:`
            <div>
                <button v-for="post in posts" :key="post.id" @click='postCmp=post.content'>
                    {{ post.title }}
                </button>
                <keep-alive>
                    <component :is="postCmp"></component>
                </keep-alive>
            </div>
            `
        })

        Vue.component('base-more',{
            template:`
            <div>more</div>
            `
        })
        const vm = new Vue({
            el: '#app',
            data: {
                pages: [
                { name: '博客', cmp: 'base-post', id: 0},
                { name: '更多', cmp: 'base-more', id: 1}
                ],
                pageCmp: 'base-post'
            },
        })
    </script>
</body>
</html>